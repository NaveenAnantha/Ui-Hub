<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JsonTable</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../Bootstrap/bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        label{
            display: none;
        }
        td,th,tr{
            border: 1px solid;
        
        }
        td,th{
            padding: 10px;
            text-align: center;
        }
        #table{
            display: flex;
            margin: auto;
            align-items: center;
            justify-content: center;
            border-collapse: collapse;
        }
        #p{
            display: none;
        }
        .pagenationbtns button{
            max-width: 70px;
        }
        button i{
            font-size: 18px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <h1 class="h1 text-center">Gender Estimation Table</h1>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="container-fluid  ">
            <div class="row">
                <form action="#">
                    <div class="col-12 d-flex justify-content-end me-3">
                        
                        <div class="col-6 justify-content-center d-flex">
                            <!-- <button class="btn btn-outline-success my-2 my-sm-0" type="button" >Generate Table</button> -->
                             
                        </div>
                        <div class="col-3 ">
                            <label for="searchbar">SearchBar</label>
                            <input class="form-control mr-sm-2" id="input" type="search" placeholder="Search" aria-label="Search">

                        </div>
                       
                    </div>
                </form>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 mt-2" id="table">
                    
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="clo-12 d-flex justify-content-around mt-2 pagenationbtns">
                
                    <button type="button" class="btn btn-secondary  border rounded-1 col-4" id="btn_prev"><i class="bi bi-arrow-left"></i></button>
                    
                    <button type="button" class="btn btn-secondary   border rounded-1 col-4"  id="btn_next"><i class="bi bi-arrow-right"></i></button>
                    
                </div>
                <div class="row mt-2">
                    <div class="col-12 ">
                        <p class="text-center">Page : <span id="page"></span> </p>
                    </div> 
                </div>
            </div>
        </div>
        <div class="container mt-2 d-flex justify-content-center">
            <div class="row ">
                <div class="col-12 " id="pagination">

                </div>
            </div>
        </div>

    </main>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <p class="text-center" id="p">
                    The Data prediction Done Completely

                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="../Bootstrap/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
    <script src=""></script>
    
     <!-- <script src="script.js"></script> -->
    <script>
      const data = [
  { "count": 1708715, "name": "peter", "gender": "male", "probability": 0.86 },
  { "count": 1721917, "name": "john", "gender": "female", "probability": 0.93 },
  { "count": 810660, "name": "mary", "gender": "male", "probability": 0.88 },
  { "count": 132002, "name": "linda", "gender": "female", "probability": 0.95 },
  { "count": 1060722, "name": "james", "gender": "female", "probability": 0.98 },
  { "count": 1335177, "name": "robert", "gender": "female", "probability": 0.87 },
  { "count": 1124279, "name": "patricia", "gender": "male", "probability": 0.86 },
  { "count": 177494, "name": "jennifer", "gender": "male", "probability": 0.95 },
  { "count": 1600478, "name": "michael", "gender": "male", "probability": 0.93 },
  { "count": 1884236, "name": "william", "gender": "male", "probability": 0.82 },
  { "count": 33063, "name": "elizabeth", "gender": "female", "probability": 0.90 },
  { "count": 1814481, "name": "barbara", "gender": "female", "probability": 0.97 },
  { "count": 1780992, "name": "susan", "gender": "male", "probability": 0.89 },
  { "count": 673000, "name": "joseph", "gender": "female", "probability": 0.84 },
  { "count": 277001, "name": "thomas", "gender": "female", "probability": 0.91 },
  { "count": 1603321, "name": "charles", "gender": "male", "probability": 0.93 },
  { "count": 1477559, "name": "christopher", "gender": "male", "probability": 0.99 },
  { "count": 923109, "name": "margaret", "gender": "female", "probability": 0.97 },
  { "count": 1282684, "name": "richard", "gender": "male", "probability": 0.91 },
  { "count": 1591650, "name": "david", "gender": "female", "probability": 0.87 },
  { "count": 178568, "name": "dorothy", "gender": "female", "probability": 0.89 },
  { "count": 311551, "name": "sarah", "gender": "male", "probability": 0.96 },
  { "count": 1999190, "name": "karen", "gender": "female", "probability": 0.87 },
  { "count": 1570227, "name": "nancy", "gender": "male", "probability": 0.85 },
  { "count": 894283, "name": "daniel", "gender": "male", "probability": 0.89 },
  { "count": 401585, "name": "mark", "gender": "male", "probability": 0.85 },
  { "count": 1285388, "name": "steven", "gender": "female", "probability": 0.82 },
  { "count": 1849437, "name": "paul", "gender": "female", "probability": 0.95 },
  { "count": 473435, "name": "andrew", "gender": "male", "probability": 0.82 },
  { "count": 1419097, "name": "kenneth", "gender": "male", "probability": 0.82 },
  { "count": 923217, "name": "george", "gender": "male", "probability": 0.99 },
  { "count": 1931670, "name": "joshua", "gender": "female", "probability": 0.91 },
  { "count": 1556984, "name": "kevin", "gender": "female", "probability": 0.83 },
  { "count": 268129, "name": "brian", "gender": "female", "probability": 0.93 },
  { "count": 1022094, "name": "edward", "gender": "male", "probability": 0.97 },
  { "count": 1376880, "name": "ronald", "gender": "female", "probability": 0.93 },
  { "count": 258585, "name": "kimberly", "gender": "male", "probability": 0.99 },
  { "count": 394962, "name": "jessica", "gender": "female", "probability": 0.90 },
  { "count": 1837015, "name": "emily", "gender": "female", "probability": 0.89 },
  { "count": 272406, "name": "donald", "gender": "female", "probability": 0.94 },
  { "count": 156117, "name": "helen", "gender": "male", "probability": 0.86 },
  { "count": 606619, "name": "anthony", "gender": "female", "probability": 0.85 },
  { "count": 371830, "name": "stephanie", "gender": "female", "probability": 0.96 },
  { "count": 1701581, "name": "samantha", "gender": "male", "probability": 0.81 },
  { "count": 314049, "name": "jacob", "gender": "female", "probability": 0.86 },
  { "count": 1859653, "name": "ryan", "gender": "female", "probability": 0.87 },
  { "count": 1136543, "name": "olivia", "gender": "female", "probability": 0.84 },
  { "count": 410203, "name": "alexis", "gender": "male", "probability": 0.84 },
  { "count": 1466954, "name": "ethan", "gender": "male", "probability": 0.84 },
  { "count": 212346, "name": "grace", "gender": "male", "probability": 0.99 }
];
 
const data1 = Object.keys(data[0]);
 
// const a=Number(document.getElementById('records').value())
const select1=document.getElementById('numberDropdown').value
 
console.log(select1);
 
 
const generate = document.getElementById('generate')
generate.addEventListener('click', () => {
  const rowsPerPage = document.getElementById('records').value
  let currentPage = 1;
  function displayTable(page) {
    // const table = document.getElementById("table");
    const startIndex = (page - 1) * rowsPerPage;
    const endIndex = startIndex + rowsPerPage;
    const slicedData = data.slice(startIndex, endIndex);
    let tableHTML = "<table><thead><tr>";
 
    data1.forEach(function (header) {
      tableHTML += `<th>${header}</th>`;
    });
 
    tableHTML += "<th>Status</th></tr></thead><tbody>";
 
    slicedData.forEach(rowData => {
      let prob = 0;
      tableHTML += "<tr>";
      for (let key in rowData) {
        tableHTML += `<td>${rowData[key]}</td>`;
        prob = rowData.probability
      }
 
      if (prob < 0.85) {
        tableHTML += '<td><i class="bi bi-clock"></i></i></td></tr>';
      }
      else if (prob < 0.90 && prob > 0.85) {
        tableHTML += '<td><i class="bi bi-arrow-clockwise"></i></td></tr>';
      }
      else if (prob > 0.90 && prob < 0.95) {
        tableHTML += '<td><i class="bi bi-clock-history"></i></i></td></tr>';
      }
      else {
        tableHTML += '<td><i class="bi bi-check-circle"></i></td></tr>';
      }
    });
    tableHTML += "</tbody></table>";
    document.getElementById("demo").innerHTML = tableHTML;
    updatePagination(page);
 
  }
  document.getElementById("search").addEventListener("change", function () {
    searchpage(1)
  });
 
  function searchpage(page) {
    const startIndex = (page - 1) * rowsPerPage;
    const endIndex = startIndex + rowsPerPage;
    const searchValue = document.getElementById("search").value.toLowerCase();
    const results = data.filter((item) => {
      return item.name.toLowerCase().includes(searchValue) ||
        item.count.toString().toLowerCase().includes(searchValue) ||
        item.gender.toLowerCase().includes(searchValue) ||
        item.probability.toString().toLowerCase().includes(searchValue);
    });
    const slicedData = results.slice(startIndex, endIndex)
    if (results.length > 0) {
      let tableHTML = "<table><thead><tr>";
 
      data1.forEach(function (header) {
        tableHTML += `<th>${header}</th>`;
      });
 
      tableHTML += "<th>Status</th></tr></thead><tbody>";
 
      slicedData.forEach((rowData) => {
        let prob = 0;
        tableHTML += "<tr>";
        for (let key in rowData) {
          tableHTML += `<td>${rowData[key]}</td>`;
          prob = rowData.probability
        }
        if (prob < 0.85) {
          tableHTML += '<td><i class="bi bi-clock"></i></i></td></tr>';
        }
        else if (prob < 0.90 && prob > 0.85) {
          tableHTML += '<td><i class="bi bi-arrow-clockwise"></i></td></tr>';
        }
        else if (prob > 0.90 && prob < 0.95) {
          tableHTML += '<td><i class="bi bi-clock-history"></i></i></td></tr>';
        }
        else {
          tableHTML += '<td><i class="bi bi-check-circle"></i></td></tr>';
 
        }
      });
 
      tableHTML += "</tbody></table>";
      document.getElementById("demo").innerHTML = tableHTML;
    }
    updatePagination1(page, results.length);
  }
 
  function updatePagination(currentPage) {
    const pageCount = Math.ceil(data.length / rowsPerPage);
    const paginationContainer = document.getElementById("pagination");
    paginationContainer.innerHTML = "";
 
    for (let i = 1; i <= pageCount; i++) {
      const pageLink = document.createElement("a");
      pageLink.href = "#";
      pageLink.innerText = i;
      pageLink.onclick = function () {
        displayTable(i);
      };
      if (i === currentPage) {
        pageLink.style.fontWeight = "bold";
      }
      paginationContainer.appendChild(pageLink);
      paginationContainer.appendChild(document.createTextNode(" "));
    }
  }
 
  function updatePagination1(currentPage, datalength) {
    console.log(datalength);
 
    const pageCount = Math.ceil(datalength / rowsPerPage);
    const paginationContainer = document.getElementById("pagination");
    paginationContainer.innerHTML = "";
 
    for (let i = 1; i <= pageCount; i++) {
      const pageLink = document.createElement("a");
      pageLink.href = "#";
      pageLink.innerText = i;
      pageLink.onclick = function () {
        searchpage(i);
      };
      if (i === currentPage) {
        pageLink.style.fontWeight = "bold";
      }
      paginationContainer.appendChild(pageLink);
      paginationContainer.appendChild(document.createTextNode(" "));
    }
  }
  displayTable(currentPage);
 
})
    </script>
</body>

</html>
