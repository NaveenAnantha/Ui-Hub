<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DynamicSearchTable</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        label{
            display: none;
        }
        td,th,tr{
            border: 1px solid;
        
        }
        td,th{
            padding: 10px;
            text-align: center;
        }
        #table{
            display: flex;
            margin: auto;
            align-items: center;
            justify-content: center;
            border-collapse: collapse;
        }
        #p{
            display: none;
        }
        .pagenationbtns button{
            max-width: 70px;
        }
        button i{
            font-size: 18px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <h1 class="h1 text-center">Gender Estimation Table</h1>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="container-fluid  ">
            <div class="row">
                <form action="#">
                    <div class="col-12 d-flex justify-content-end me-3">
                        
                        <div class="col-6 justify-content-center d-flex">
                            <!-- <button class="btn btn-outline-success my-2 my-sm-0" type="button" >Generate Table</button> -->
                             
                        </div>
                        <div class="col-3 ">
                            <label for="searchbar">SearchBar</label>
                            <input class="form-control mr-sm-2" id="input" type="search" placeholder="Search" aria-label="Search">

                        </div>
                       
                    </div>
                </form>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 mt-2" id="table">
                    
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="clo-12 d-flex justify-content-around mt-2 pagenationbtns">
                
                    <button type="button" class="btn btn-secondary  border rounded-1 col-4" id="btn_prev"><i class="bi bi-arrow-left"></i></button>
                    
                    <button type="button" class="btn btn-secondary   border rounded-1 col-4"  id="btn_next"><i class="bi bi-arrow-right"></i></button>
                    
                </div>
                <div class="row mt-2">
                    <div class="col-12 ">
                        <p class="text-center">Page : <span id="page"></span> </p>
                    </div> 
                </div>
            </div>
        </div>
        <div class="container mt-2 d-flex justify-content-center">
            <div class="row ">
                <div class="col-12 " id="pagination">

                </div>
            </div>
        </div>

    </main>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <p class="text-center" id="p">
                    The Data prediction Done Completely

                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script>
         data=[
        {"count": 1708715, "name": "peter", "gender": "male", "probability": 0.86},
        {"count": 1721917, "name": "john", "gender": "female", "probability": 0.93},
        {"count": 810660, "name": "mary", "gender": "male", "probability": 0.88},
        {"count": 132002, "name": "linda", "gender": "female", "probability": 0.95},
        {"count": 1060722, "name": "james", "gender": "female", "probability": 0.98},
        {"count": 1335177, "name": "robert", "gender": "female", "probability": 0.87},
        {"count": 1124279, "name": "patricia", "gender": "male", "probability": 0.86},
        {"count": 177494, "name": "jennifer", "gender": "male", "probability": 0.95},
        {"count": 1600478, "name": "michael", "gender": "male", "probability": 0.93},
        {"count": 1884236, "name": "william", "gender": "male", "probability": 0.82},
        {"count": 33063, "name": "elizabeth", "gender": "female", "probability": 0.90},
        {"count": 1814481, "name": "barbara", "gender": "female", "probability": 0.97},
        {"count": 1780992, "name": "susan", "gender": "male", "probability": 0.89},
        {"count": 673000, "name": "joseph", "gender": "female", "probability": 0.84},
        {"count": 277001, "name": "thomas", "gender": "female", "probability": 0.91},
        {"count": 1603321, "name": "charles", "gender": "male", "probability": 0.93},
        {"count": 1477559, "name": "christopher", "gender": "male", "probability": 0.99},
        {"count": 923109, "name": "margaret", "gender": "female", "probability": 0.97},
        {"count": 1282684, "name": "richard", "gender": "male", "probability": 0.91},
        {"count": 1591650, "name": "david", "gender": "female", "probability": 0.87},
        {"count": 178568, "name": "dorothy", "gender": "female", "probability": 0.89},
        {"count": 311551, "name": "sarah", "gender": "male", "probability": 0.96},
        {"count": 1999190, "name": "karen", "gender": "female", "probability": 0.87},
        {"count": 1570227, "name": "nancy", "gender": "male", "probability": 0.85},
        {"count": 894283, "name": "daniel", "gender": "male", "probability": 0.89},
        {"count": 401585, "name": "mark", "gender": "male", "probability": 0.85},
        {"count": 1285388, "name": "steven", "gender": "female", "probability": 0.82},
        {"count": 1849437, "name": "paul", "gender": "female", "probability": 0.95},
        {"count": 473435, "name": "andrew", "gender": "male", "probability": 0.82},
        {"count": 1419097, "name": "kenneth", "gender": "male", "probability": 0.82},
        {"count": 923217, "name": "george", "gender": "male", "probability": 0.99},
        {"count": 1931670, "name": "joshua", "gender": "female", "probability": 0.91},
        {"count": 1556984, "name": "kevin", "gender": "female", "probability": 0.83},
        {"count": 268129, "name": "brian", "gender": "female", "probability": 0.93},
        {"count": 1022094, "name": "edward", "gender": "male", "probability": 0.97},
        {"count": 1376880, "name": "ronald", "gender": "female", "probability": 0.93},
        {"count": 258585, "name": "kimberly", "gender": "male", "probability": 0.99},
        {"count": 394962, "name": "jessica", "gender": "female", "probability": 0.90},
        {"count": 1837015, "name": "emily", "gender": "female", "probability": 0.89},
        {"count": 272406, "name": "donald", "gender": "female", "probability": 0.94},
        {"count": 156117, "name": "helen", "gender": "male", "probability": 0.86},
        {"count": 606619, "name": "anthony", "gender": "female", "probability": 0.85},
        {"count": 371830, "name": "stephanie", "gender": "female", "probability": 0.96},
        {"count": 1701581, "name": "samantha", "gender": "male", "probability": 0.81},
        {"count": 314049, "name": "jacob", "gender": "female", "probability": 0.86},
        {"count": 1859653, "name": "ryan", "gender": "female", "probability": 0.87},
        {"count": 1136543, "name": "olivia", "gender": "female", "probability": 0.84},
        {"count": 410203, "name": "alexis", "gender": "male", "probability": 0.84},
        {"count": 1466954, "name": "ethan", "gender": "male", "probability": 0.84},
        {"count": 212346, "name": "grace", "gender": "male", "probability": 0.99}
     
    ]
    
    // Generating with Javascript
        const header = Object.keys(data[0]);
    
    
       addEventListener("load", function () {
            
            let table = `<table>
            <thead>
                <tr>`;
            
            header.forEach(headers => {
                table += `<th>${headers}</th>`;
                console.log(headers);
            });
    
            table += `<th>Status</th></thead>`;
    
            
            data.forEach(value => {
                let mesure=0;
                table += `<tbody>
                <tr>`;
                for (let key in value) {
                    table += `<td>${value[key]}</td>`;
                }
                // creating the status icons 
                mesure = value.probability;
    
                if(mesure < 0.85){
                    table +=`<td><i class="bi bi-clock"></i></i></td></tr>`
                }
                else if(mesure < 0.90 && mesure > 0.85){
                    table +=`<td><i class="bi bi-arrow-clockwise"></i></td></tr>`
                }
                else if(mesure<0.95 && mesure > 0.90){
                    table +=`<td><i class="bi bi-clock-history"></i></td></tr>`
    
                }
                else{
                    table +=`<td><i class="bi bi-check-circle"></i></td></tr>`
    
                }
                table += `</tbody>`;
            });
    
            table += `</table>`;
    
            document.getElementById("table").innerHTML = table;
            document.querySelector("p").style.display = "block";
        });
    
        // Filtering the data
        document.getElementById("input").addEventListener("change", function () {
            let value = this.value.toLowerCase();
            console.log(value);
            console.log(typeof(value));
            
            let rows = document.querySelectorAll("tbody tr");
    
            rows.forEach(row => {
                row.style.display = row.textContent.toLowerCase().indexOf(value) > -1 ? ' ' : 'none';
            });
        });
    
        // Page Nation
    
        // Previous Page
        var current_page = 1;
        var records_per_page = 10;
        
        var l = document.getElementById("table").rows.length
    
        function prevPage()
        {
    
            if (current_page > 1) {
                current_page--;
                changePage(current_page);
            }
        }
        // nextpage
        function nextPage()
        {
            if (current_page < numPages()) {
                current_page++;
                changePage(current_page);
            }
        }
        
        function changePage(page)
        {
            var btn_next = document.getElementById("btn_next");
            var btn_prev = document.getElementById("btn_prev");
            var listing_table = document.getElementById("table");
            var page_span = document.getElementById("page");
        
            // Validate page
            if (page < 1) page = 1;
            if (page > numPages()) page = numPages();
    
            [...listing_table.getElementsByTagName('tr')].forEach((tr)=>{
                tr.style.display='none'; // reset all to not display
            });
            listing_table.rows[0].style.display = ""; // display the title row
    
            for (var i = (page-1) * records_per_page + 1; i < (page * records_per_page) + 1; i++) {
                if (listing_table.rows[i]) {
                    listing_table.rows[i].style.display = ""
                } else {
                    continue;
                }
            }
            
            page_span.innerHTML = page + "/" + numPages();
    
            if (page == 1) {
                btn_prev.style.visibility = "hidden";
            } else {
                btn_prev.style.visibility = "visible";
            }
    
            if (page == numPages()) {
                btn_next.style.visibility = "hidden";
            } else {
                btn_next.style.visibility = "visible";
            }
        }
    
        function numPages()
        {
            return Math.ceil((l - 1) / records_per_page);
        }
    
        window.onload = function() {
            changePage(current_page);
        };
    </script>
</body>

</html>
